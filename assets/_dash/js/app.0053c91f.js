(function(){"use strict";var e={7544:function(e,t,i){var a=i(9242),n=i(3396);function l(e,t,i,a,l,s){const o=(0,n.up)("HomePage");return(0,n.wg)(),(0,n.j4)(o)}var s=i(6520),o=i(7139);const r=e=>((0,n.dD)("data-v-e1d65eee"),e=e(),(0,n.Cn)(),e),u=["onClick"],c={key:0},d={style:{height:"60vh",position:"relative","background-color":"#efefef"}},h={style:{height:"inherit"}},f={key:0,style:{height:"inherit"}},p=r((()=>(0,n._)("div",{style:{padding:"0"}},[(0,n._)("p",{style:{"font-size":"1.5rem",color:"#aaa"}}," no files in this folder ")],-1))),m={key:1,style:{height:"60vh","overflow-y":"auto","overflow-x":"hidden"}},g={style:{padding:"15px 20px"}},w=r((()=>(0,n._)("div",{class:"el-upload__text"},[(0,n.Uk)(" Drop file here or "),(0,n._)("em",null,"click to upload")],-1))),y={style:{width:"30px"}},v={style:{margin:"0 20px",height:"100px"}},_={key:0},b=r((()=>(0,n._)("div",{style:{width:"60px"}},"username",-1))),k=r((()=>(0,n._)("br",null,null,-1))),P=r((()=>(0,n._)("div",{style:{width:"60px"}},"password",-1))),D={key:1},x=r((()=>(0,n._)("div",{style:{width:"60px"}},"token",-1))),W={key:2};function j(e,t,i,a,l,s){const r=(0,n.up)("el-col"),j=(0,n.up)("UploadFilled"),O=(0,n.up)("el-icon"),F=(0,n.up)("el-button"),C=(0,n.up)("el-row"),B=(0,n.up)("FileItem"),S=(0,n.up)("upload-filled"),T=(0,n.up)("el-upload"),z=(0,n.up)("el-dialog"),R=(0,n.up)("el-avatar"),U=(0,n.up)("el-affix"),A=(0,n.up)("el-menu-item"),V=(0,n.up)("el-menu"),Z=(0,n.up)("el-input"),I=(0,n.up)("el-main"),q=(0,n.up)("el-container");return(0,n.wg)(),(0,n.j4)(q,{height:"100%",direction:"vertical"},{default:(0,n.w5)((()=>[(0,n.Wm)(I,{height:"100%"},{default:(0,n.w5)((()=>[(0,n.Wm)(C,{gutter:20,justify:"space-around"},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{span:12,offset:0}),(0,n.Wm)(r,{span:12,offset:0},{default:(0,n.w5)((()=>[(0,n.Wm)(F,{type:"primary",size:"large",onClick:t[0]||(t[0]=t=>e.upload.show=!0)},{default:(0,n.w5)((()=>[(0,n.Wm)(O,null,{default:(0,n.w5)((()=>[(0,n.Wm)(j)])),_:1}),(0,n.Uk)("上传")])),_:1})])),_:1})])),_:1}),(0,n.Wm)(C,{gutter:20,justify:"center"},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{span:16,offset:0},{default:(0,n.w5)((()=>[(0,n.Wm)(C,{justify:"center"},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{span:12,offset:0},{default:(0,n.w5)((()=>[(0,n._)("h2",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.currentPaths,((t,i)=>((0,n.wg)(),(0,n.iD)("span",{key:i},[(0,n._)("span",{onClick:t=>e.goToPathByIndex(i),class:"can-click"},(0,o.zw)(t),9,u),"/"!=t?((0,n.wg)(),(0,n.iD)("span",c,"/")):(0,n.kq)("",!0)])))),128))])])),_:1})])),_:1}),(0,n._)("div",d,[(0,n._)("div",h,[0==e.files.length?((0,n.wg)(),(0,n.iD)("div",f,[(0,n.Wm)(C,{gutter:20,justify:"center",align:"middle",style:{height:"inherit"}},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{offset:0},{default:(0,n.w5)((()=>[p,(0,n._)("div",null,[(0,n.Wm)(F,{type:"primary",onClick:e.goBack},{default:(0,n.w5)((()=>[(0,n.Uk)("返回上一级")])),_:1},8,["onClick"])])])),_:1})])),_:1})])):(0,n.kq)("",!0),0!=e.files.length?((0,n.wg)(),(0,n.iD)("div",m,[(0,n._)("div",g,[(0,n.Wm)(C,{gutter:20,justify:"space-between"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.files,((t,i)=>((0,n.wg)(),(0,n.iD)("div",{key:i,style:{margin:"5px 10px"}},[(0,n.Wm)(B,{onFileDBClick:e.handledblClick,style:{width:"140px"},file:t},null,8,["onFileDBClick","file"])])))),128))])),_:1})])])):(0,n.kq)("",!0)])])])),_:1})])),_:1}),(0,n.Wm)(z,{onClose:e.handleClose,modelValue:e.upload.show,"onUpdate:modelValue":t[1]||(t[1]=t=>e.upload.show=t),title:"","align-center":""},{default:(0,n.w5)((()=>[(0,n._)("div",null,[(0,n.Wm)(T,{ref:"uploadref","on-success":e.handleSuccess,"show-file-list":"",drag:"",multiple:"","http-request":e.uploadFile},{default:(0,n.w5)((()=>[(0,n.Wm)(C,{style:{height:"30vh"},gutter:20,justify:"center",align:"middle"},{default:(0,n.w5)((()=>[(0,n.Wm)(O,{class:"el-icon--upload"},{default:(0,n.w5)((()=>[(0,n.Wm)(S)])),_:1}),w])),_:1})])),_:1},8,["on-success","http-request"])])])),_:1},8,["onClose","modelValue"]),(0,n.Wm)(U,{onClick:t[2]||(t[2]=t=>e.auth.show=!e.auth.show),class:"affix",position:"bottom",offset:50},{default:(0,n.w5)((()=>[(0,n._)("div",y,[(0,n.Wm)(R,{icon:"el-icon-user-solid",size:"large",shape:"circle",src:e.userAvatar,fit:"contain"},null,8,["src"])])])),_:1}),(0,n.Wm)(z,{modelValue:e.auth.show,"onUpdate:modelValue":t[7]||(t[7]=t=>e.auth.show=t),"align-center":"",style:{"max-width":"600px"}},{header:(0,n.w5)((()=>[(0,n.Wm)(V,{onSelect:t[3]||(t[3]=t=>e.auth.selected=t),mode:"horizontal","default-active":e.auth.selected},{default:(0,n.w5)((()=>[(0,n.Wm)(A,{index:"basic"},{default:(0,n.w5)((()=>[(0,n.Uk)("账号密码认证")])),_:1}),(0,n.Wm)(A,{index:"token"},{default:(0,n.w5)((()=>[(0,n.Uk)("TOKEN 认证")])),_:1}),(0,n.Wm)(A,{index:"annymouns"},{default:(0,n.w5)((()=>[(0,n.Uk)("匿名使用")])),_:1})])),_:1},8,["default-active"])])),footer:(0,n.w5)((()=>[(0,n.Wm)(C,{gutter:20,justify:"center"},{default:(0,n.w5)((()=>[(0,n.Wm)(F,{type:"primary",size:"large",onClick:e.confirmAuth},{default:(0,n.w5)((()=>[(0,n.Uk)(" 确定 ")])),_:1},8,["onClick"])])),_:1})])),default:(0,n.w5)((()=>[(0,n._)("div",v,["basic"==e.auth.selected?((0,n.wg)(),(0,n.iD)("div",_,[(0,n.Wm)(C,{gutter:20,justify:"center",align:"middle"},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{span:18,offset:0},{default:(0,n.w5)((()=>[(0,n.Wm)(Z,{modelValue:e.auth.basic.username,"onUpdate:modelValue":t[4]||(t[4]=t=>e.auth.basic.username=t),placeholder:"请输入用户名"},{prepend:(0,n.w5)((()=>[b])),_:1},8,["modelValue"])])),_:1})])),_:1}),k,(0,n.Wm)(C,{gutter:20,justify:"center"},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{span:18,offset:0},{default:(0,n.w5)((()=>[(0,n.Wm)(Z,{label:"password","show-password":"",modelValue:e.auth.basic.password,"onUpdate:modelValue":t[5]||(t[5]=t=>e.auth.basic.password=t),placeholder:"请输入密码"},{prepend:(0,n.w5)((()=>[P])),_:1},8,["modelValue"])])),_:1})])),_:1})])):(0,n.kq)("",!0),"token"==e.auth.selected?((0,n.wg)(),(0,n.iD)("div",D,[(0,n.Wm)(C,{gutter:20,justify:"center",style:{height:"100px"},align:"middle"},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{span:18,offset:0},{default:(0,n.w5)((()=>[(0,n.Wm)(Z,{modelValue:e.auth.token,"onUpdate:modelValue":t[6]||(t[6]=t=>e.auth.token=t),placeholder:"请输入 token"},{prepend:(0,n.w5)((()=>[x])),_:1},8,["modelValue"])])),_:1})])),_:1})])):(0,n.kq)("",!0),"annymouns"==e.auth.selected?((0,n.wg)(),(0,n.iD)("div",W,[(0,n.Wm)(C,{gutter:20,justify:"center",style:{height:"100px"},align:"middle"},{default:(0,n.w5)((()=>[(0,n.Uk)("使用匿名访问")])),_:1})])):(0,n.kq)("",!0)])])),_:1},8,["modelValue"])])),_:1})])),_:1})}var O=i(7327);i(2062),i(7658),i(2801);function F(e,t,i,a,l,s){return(0,n.wg)(),(0,n.iD)("div",null,"auth now")}var C=function(e,t,i,a){var n,l=arguments.length,s=l<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,a);else for(var o=e.length-1;o>=0;o--)(n=e[o])&&(s=(l<3?n(s):l>3?n(t,i,s):n(t,i))||s);return l>3&&s&&Object.defineProperty(t,i,s),s};let B=class extends s.w3{};B=C([(0,s.Ei)({props:{}})],B);var S=B,T=i(89);const z=(0,T.Z)(S,[["render",F],["__scopeId","data-v-b48ac4ba"]]);var R=z;const U={class:"file-name-info"},A={class:"file-modify-info"};function V(e,t,i,a,l,s){const r=(0,n.up)("el-image");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("div",{style:{"padding-top":"100%",position:"relative"},onDblclick:t[0]||(t[0]=(...t)=>e.handleDBLClick&&e.handleDBLClick(...t))},[(0,n.Wm)(r,{class:"image-1-1",size:"small",src:e.getimage(e.file.filetype),fit:"contain",lazy:!0},null,8,["src"])],32),(0,n._)("div",null,[(0,n._)("div",U,(0,o.zw)(e.file.filename),1),(0,n._)("div",A,(0,o.zw)(e.convertDate(e.file.modify_time)),1)])])}var Z;(function(e){e["File"]="file",e["Folder"]="folder",e["Image"]="image",e["Text"]="text",e["Video"]="video",e["Audio"]="audio"})(Z||(Z={}));const I=()=>window.location.origin;var q=function(e,t,i,a){var n,l=arguments.length,s=l<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,a);else for(var o=e.length-1;o>=0;o--)(n=e[o])&&(s=(l<3?n(s):l>3?n(t,i,s):n(t,i))||s);return l>3&&s&&Object.defineProperty(t,i,s),s};let L,$=class extends s.w3{constructor(...e){super(...e),(0,O.Z)(this,"file",L)}convertDate(e){return e.toLocaleDateString()+" "+e.toLocaleTimeString()}handleDBLClick(){this.$emit("fileDBClick",this.file)}getimage(e){let t=`static/filepic_${e}.png`;return e==Z.Image&&(t=I()+this.file.fullpath),t}};$=q([(0,s.Ei)({props:{file:{required:!0}}})],$);var E=$;const M=(0,T.Z)(E,[["render",V],["__scopeId","data-v-e4680a74"]]);var H=M;function K(e,t,i,a,l,s){return(0,n.wg)(),(0,n.iD)("div",null,"upload box")}var Q=function(e,t,i,a){var n,l=arguments.length,s=l<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,a);else for(var o=e.length-1;o>=0;o--)(n=e[o])&&(s=(l<3?n(s):l>3?n(t,i,s):n(t,i))||s);return l>3&&s&&Object.defineProperty(t,i,s),s};let N=class extends s.w3{};N=Q([(0,s.Ei)({props:{}})],N);var J=N;const Y=(0,T.Z)(J,[["render",K],["__scopeId","data-v-989163d4"]]);var G=Y,X=i(7178),ee=i(6666),te=i(4161),ie=function(e,t,i,a){var n,l=arguments.length,s=l<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,a);else for(var o=e.length-1;o>=0;o--)(n=e[o])&&(s=(l<3?n(s):l>3?n(t,i,s):n(t,i))||s);return l>3&&s&&Object.defineProperty(t,i,s),s};let ae=class extends s.w3{constructor(...e){super(...e),(0,O.Z)(this,"auth",{show:!1,basic:{username:"",password:""},token:"",selected:"basic",useAuthType:"annymous"}),(0,O.Z)(this,"upload",{show:!1}),(0,O.Z)(this,"ischange",!1),(0,O.Z)(this,"userAvatar","/_dash/static/user.png"),(0,O.Z)(this,"currentPaths",this.getPathByQuery()),(0,O.Z)(this,"files",[{filename:"test",filetype:Z.Folder,modify_time:new Date,size:"4K"},{filename:"test_file.txt",filetype:Z.File,modify_time:new Date,size:"10K"},{filename:"test.jpg",filetype:Z.Image,modify_time:new Date,size:"1MB"}])}clearFiles(){const e=this.$refs.uploadref;e.clearFiles()}handleClose(){setTimeout(this.clearFiles,1e3),this.ischange&&this.getPathFiles(this.currentDir).finally((()=>{this.ischange=!1}))}getPathByQuery(){const e=new URLSearchParams(window.location.search);let t=e.get("path")?.split("/").filter((e=>""!==e))||[];return t.unshift("/"),t}handledblClick(e){e.filetype===Z.Folder?(this.currentPaths.push(e.filename),this.getPathFiles(this.currentDir)):window.open(I()+this.cleanPaths("/"+e.fullpath))}confirmAuth(){if("basic"==this.auth.selected){if(""==this.auth.basic.username||""==this.auth.basic.password)return void(0,X.z8)({message:"用户名或密码不能为空",type:"error"})}else if("token"==this.auth.selected){if(""==this.auth.token)return void(0,X.z8)({message:"token 不能为空",type:"error"})}else this.auth.selected;this.auth.show=!1,this.auth.useAuthType=this.auth.selected,localStorage.setItem("auth",JSON.stringify(this.auth)),this.getPathFiles(this.currentDir)}goBack(){this.currentPaths.pop(),this.getPathFiles(this.currentDir)}handleSuccess(e,t,i){(0,ee.bM)({duration:3e3,message:(0,n.h)("i",{style:"color: teal"},`文件 ${t.name} 上传成功`)})}goToPathByIndex(e){this.currentPaths=this.currentPaths.slice(0,e+1),this.getPathFiles(this.currentDir).then((e=>{console.log("get res : ",e),this.updateQueryPath()}))}cleanPaths(e){return e.replace(/\/+/g,"/")}get currentDir(){let e=this.currentPaths.join("/");return e.replace(/\/+/g,"/")}created(){let e=localStorage.getItem("auth");e?(this.auth=JSON.parse(e),this.getPathFiles(this.currentDir)):this.auth.show=!0}convertBytes(e){return e<1024?e+"B":e<1048576?(e/1024).toFixed(2)+"KB":e<1073741824?(e/1024/1024).toFixed(2)+"MB":(e/1024/1024/1024).toFixed(2)+"GB"}getPathFiles(e){let t="/_apilist";console.log("in get path files",e);let i=[t,e].join("/").replace(/\/+/g,"/");if(i=I()+i,"basic"==this.auth.useAuthType){let e=btoa(this.auth.basic.username+":"+this.auth.basic.password);te.Z.defaults.headers.common.Authorization="Basic "+e}else"token"==this.auth.useAuthType?i+="?token="+this.auth.token:"annymous"==this.auth.useAuthType&&(te.Z.defaults.headers.common.Authorization="");return te.Z.get(i).then((e=>{let t=e.data.data,i=[];t.forEach((e=>{i.push({filename:e.name,filetype:e.file_type,modify_time:new Date(e.mod_time),size:this.convertBytes(e.size),fullpath:this.currentDir+"/"+e.name})})),this.files=i,this.updateQueryPath()})).catch((e=>{(0,X.z8)({showClose:!0,message:"get files list error: "+e,type:"error"})}))}updateQueryPath(){const e=new URLSearchParams(window.location.search);e.set("path",this.currentDir),console.log("path ",this.currentDir);const t=`${window.location.pathname}?${e.toString()}`;window.history.pushState({},"",t)}changePath(e){this.currentPaths.push(e)}uploadFile(e){return this.ischange=!0,new Promise(((t,i)=>{let a=e.file;const n=new XMLHttpRequest;let l=I()+this.currentDir+"/"+a.name;if("basic"==this.auth.useAuthType){let e=btoa(this.auth.basic.username+":"+this.auth.basic.password);n.open("POST",l,!0),n.setRequestHeader("Authorization","Basic "+e)}else"token"==this.auth.useAuthType?(l=l+"?token="+this.auth.token,n.open("POST",l,!0)):n.open("POST",l,!0);const s=new FormData;s.append("file",a),n.send(s),n.onreadystatechange=()=>{4===n.readyState&&(200===n.status?t(n):((0,X.z8)({showClose:!0,dangerouslyUseHTMLString:!0,message:`<p>upload file error:</p><br/>filename: ${a.name}<p>status: ${n.status}</p><p>statusText: ${n.statusText}</p>`,type:"error"}),i(n)))}}))}};ae=ie([(0,s.Ei)({props:{},components:{AuthBox:R,FileItem:H,UploadBox:G}})],ae);var ne=ae;const le=(0,T.Z)(ne,[["render",j],["__scopeId","data-v-e1d65eee"]]);var se=le,oe=function(e,t,i,a){var n,l=arguments.length,s=l<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,a);else for(var o=e.length-1;o>=0;o--)(n=e[o])&&(s=(l<3?n(s):l>3?n(t,i,s):n(t,i))||s);return l>3&&s&&Object.defineProperty(t,i,s),s};let re=class extends s.w3{};re=oe([(0,s.Ei)({components:{HomePage:se}})],re);var ue=re;const ce=(0,T.Z)(ue,[["render",l]]);var de=ce,he=i(8919),fe=(i(4415),i(2748));const pe=(0,a.ri)(de);for(const[me,ge]of Object.entries(fe))pe.component(me,ge);pe.use(he.Z).mount("#app")}},t={};function i(a){var n=t[a];if(void 0!==n)return n.exports;var l=t[a]={exports:{}};return e[a].call(l.exports,l,l.exports,i),l.exports}i.m=e,function(){var e=[];i.O=function(t,a,n,l){if(!a){var s=1/0;for(c=0;c<e.length;c++){a=e[c][0],n=e[c][1],l=e[c][2];for(var o=!0,r=0;r<a.length;r++)(!1&l||s>=l)&&Object.keys(i.O).every((function(e){return i.O[e](a[r])}))?a.splice(r--,1):(o=!1,l<s&&(s=l));if(o){e.splice(c--,1);var u=n();void 0!==u&&(t=u)}}return t}l=l||0;for(var c=e.length;c>0&&e[c-1][2]>l;c--)e[c]=e[c-1];e[c]=[a,n,l]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var a in t)i.o(t,a)&&!i.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};i.O.j=function(t){return 0===e[t]};var t=function(t,a){var n,l,s=a[0],o=a[1],r=a[2],u=0;if(s.some((function(t){return 0!==e[t]}))){for(n in o)i.o(o,n)&&(i.m[n]=o[n]);if(r)var c=r(i)}for(t&&t(a);u<s.length;u++)l=s[u],i.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return i.O(c)},a=self["webpackChunkdashboard"]=self["webpackChunkdashboard"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=i.O(void 0,[998],(function(){return i(7544)}));a=i.O(a)})();
//# sourceMappingURL=app.0053c91f.js.map