(function(){"use strict";var e={9832:function(e,t,i){var a=i(9242),l=i(3396);function n(e,t,i,a,n,o){const s=(0,l.up)("HomePage");return(0,l.wg)(),(0,l.j4)(s)}var o=i(6520),s=i(7139);const r=e=>((0,l.dD)("data-v-5dbf3396"),e=e(),(0,l.Cn)(),e),u=["onClick"],c={key:0},d={style:{height:"60vh",position:"relative","background-color":"#efefef"}},f={style:{margin:"15px 0 15px 15px",height:"inherit"}},h={key:0,style:{height:"inherit"}},p=r((()=>(0,l._)("div",{style:{padding:"20px 0"}},[(0,l._)("p",{style:{"font-size":"1.5rem",color:"#aaa"}},"no files in this folder")],-1))),m={key:1,style:{height:"60vh","overflow-y":"auto","overflow-x":"hidden"}},g=r((()=>(0,l._)("div",{class:"el-upload__text"},[(0,l.Uk)(" Drop file here or "),(0,l._)("em",null,"click to upload")],-1))),w={style:{width:"30px"}},y={style:{margin:"0 20px",height:"100px"}},v={key:0},_=r((()=>(0,l._)("div",{style:{width:"60px"}},"username",-1))),b=r((()=>(0,l._)("br",null,null,-1))),k=r((()=>(0,l._)("div",{style:{width:"60px"}},"password",-1))),x={key:1},D=r((()=>(0,l._)("div",{style:{width:"60px"}},"token",-1))),P={key:2};function W(e,t,i,a,n,o){const r=(0,l.up)("el-col"),W=(0,l.up)("UploadFilled"),j=(0,l.up)("el-icon"),O=(0,l.up)("el-button"),F=(0,l.up)("el-row"),C=(0,l.up)("FileItem"),T=(0,l.up)("upload-filled"),z=(0,l.up)("el-upload"),B=(0,l.up)("el-dialog"),S=(0,l.up)("el-avatar"),R=(0,l.up)("el-affix"),A=(0,l.up)("el-menu-item"),U=(0,l.up)("el-menu"),V=(0,l.up)("el-input"),Z=(0,l.up)("el-main"),I=(0,l.up)("el-container");return(0,l.wg)(),(0,l.j4)(I,{height:"100%",direction:"vertical"},{default:(0,l.w5)((()=>[(0,l.Wm)(Z,{height:"100%"},{default:(0,l.w5)((()=>[(0,l.Wm)(F,{gutter:20,justify:"space-around"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{span:12,offset:0}),(0,l.Wm)(r,{span:12,offset:0},{default:(0,l.w5)((()=>[(0,l.Wm)(O,{type:"primary",size:"large",onClick:t[0]||(t[0]=t=>e.upload.show=!0)},{default:(0,l.w5)((()=>[(0,l.Wm)(j,null,{default:(0,l.w5)((()=>[(0,l.Wm)(W)])),_:1}),(0,l.Uk)("上传")])),_:1})])),_:1})])),_:1}),(0,l.Wm)(F,{gutter:20,justify:"center"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{span:16,offset:0},{default:(0,l.w5)((()=>[(0,l.Wm)(F,{justify:"center"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{span:12,offset:0},{default:(0,l.w5)((()=>[(0,l._)("h2",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.currentPaths,((t,i)=>((0,l.wg)(),(0,l.iD)("span",{key:i},[(0,l._)("span",{onClick:t=>e.goToPathByIndex(i),class:"can-click"},(0,s.zw)(t),9,u),"/"!=t?((0,l.wg)(),(0,l.iD)("span",c,"/")):(0,l.kq)("",!0)])))),128))])])),_:1})])),_:1}),(0,l._)("div",d,[(0,l._)("div",f,[0==e.files.length?((0,l.wg)(),(0,l.iD)("div",h,[(0,l.Wm)(F,{gutter:20,justify:"center",align:"middle",style:{height:"inherit"}},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{offset:0},{default:(0,l.w5)((()=>[p,(0,l._)("div",null,[(0,l.Wm)(O,{type:"primary",onClick:e.goBack},{default:(0,l.w5)((()=>[(0,l.Uk)("返回上一级")])),_:1},8,["onClick"])])])),_:1})])),_:1})])):(0,l.kq)("",!0),0!=e.files.length?((0,l.wg)(),(0,l.iD)("div",m,[(0,l.Wm)(F,{gutter:20,justify:"start"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.files,((t,i)=>((0,l.wg)(),(0,l.iD)("div",{key:i,style:{margin:"5px 10px"}},[(0,l.Wm)(C,{onFileDBClick:e.handledblClick,style:{width:"140px"},file:t},null,8,["onFileDBClick","file"])])))),128))])),_:1})])):(0,l.kq)("",!0)])])])),_:1})])),_:1}),(0,l.Wm)(B,{onClose:e.handleClose,modelValue:e.upload.show,"onUpdate:modelValue":t[1]||(t[1]=t=>e.upload.show=t),title:"",width:"80%","align-center":""},{default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Wm)(z,{ref:"uploadref","on-success":e.handleSuccess,"show-file-list":"",drag:"",multiple:"","http-request":e.uploadFile},{default:(0,l.w5)((()=>[(0,l.Wm)(j,{class:"el-icon--upload"},{default:(0,l.w5)((()=>[(0,l.Wm)(T)])),_:1}),g])),_:1},8,["on-success","http-request"])])])),_:1},8,["onClose","modelValue"]),(0,l.Wm)(R,{onClick:t[2]||(t[2]=t=>e.auth.show=!e.auth.show),class:"affix",position:"bottom",offset:50},{default:(0,l.w5)((()=>[(0,l._)("div",w,[(0,l.Wm)(S,{icon:"el-icon-user-solid",size:"large",shape:"circle",src:e.userAvatar,fit:"contain"},null,8,["src"])])])),_:1}),(0,l.Wm)(B,{modelValue:e.auth.show,"onUpdate:modelValue":t[7]||(t[7]=t=>e.auth.show=t),"align-center":"",style:{"max-width":"600px"}},{header:(0,l.w5)((()=>[(0,l.Wm)(U,{onSelect:t[3]||(t[3]=t=>e.auth.selected=t),mode:"horizontal","default-active":e.auth.selected},{default:(0,l.w5)((()=>[(0,l.Wm)(A,{index:"basic"},{default:(0,l.w5)((()=>[(0,l.Uk)("账号密码认证")])),_:1}),(0,l.Wm)(A,{index:"token"},{default:(0,l.w5)((()=>[(0,l.Uk)("TOKEN 认证")])),_:1}),(0,l.Wm)(A,{index:"annymouns"},{default:(0,l.w5)((()=>[(0,l.Uk)("匿名使用")])),_:1})])),_:1},8,["default-active"])])),footer:(0,l.w5)((()=>[(0,l.Wm)(F,{gutter:20,justify:"center"},{default:(0,l.w5)((()=>[(0,l.Wm)(O,{type:"primary",size:"large",onClick:e.confirmAuth},{default:(0,l.w5)((()=>[(0,l.Uk)(" 确定 ")])),_:1},8,["onClick"])])),_:1})])),default:(0,l.w5)((()=>[(0,l._)("div",y,["basic"==e.auth.selected?((0,l.wg)(),(0,l.iD)("div",v,[(0,l.Wm)(F,{gutter:20,justify:"center",align:"middle"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{span:18,offset:0},{default:(0,l.w5)((()=>[(0,l.Wm)(V,{modelValue:e.auth.basic.username,"onUpdate:modelValue":t[4]||(t[4]=t=>e.auth.basic.username=t),placeholder:"请输入用户名"},{prepend:(0,l.w5)((()=>[_])),_:1},8,["modelValue"])])),_:1})])),_:1}),b,(0,l.Wm)(F,{gutter:20,justify:"center"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{span:18,offset:0},{default:(0,l.w5)((()=>[(0,l.Wm)(V,{label:"password","show-password":"",modelValue:e.auth.basic.password,"onUpdate:modelValue":t[5]||(t[5]=t=>e.auth.basic.password=t),placeholder:"请输入密码"},{prepend:(0,l.w5)((()=>[k])),_:1},8,["modelValue"])])),_:1})])),_:1})])):(0,l.kq)("",!0),"token"==e.auth.selected?((0,l.wg)(),(0,l.iD)("div",x,[(0,l.Wm)(F,{gutter:20,justify:"center",style:{height:"100px"},align:"middle"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{span:18,offset:0},{default:(0,l.w5)((()=>[(0,l.Wm)(V,{modelValue:e.auth.token,"onUpdate:modelValue":t[6]||(t[6]=t=>e.auth.token=t),placeholder:"请输入 token"},{prepend:(0,l.w5)((()=>[D])),_:1},8,["modelValue"])])),_:1})])),_:1})])):(0,l.kq)("",!0),"annymouns"==e.auth.selected?((0,l.wg)(),(0,l.iD)("div",P,[(0,l.Wm)(F,{gutter:20,justify:"center",style:{height:"100px"},align:"middle"},{default:(0,l.w5)((()=>[(0,l.Uk)("使用匿名访问")])),_:1})])):(0,l.kq)("",!0)])])),_:1},8,["modelValue"])])),_:1})])),_:1})}var j=i(7327);i(7658),i(2801);function O(e,t,i,a,n,o){return(0,l.wg)(),(0,l.iD)("div",null,"auth now")}var F=function(e,t,i,a){var l,n=arguments.length,o=n<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,a);else for(var s=e.length-1;s>=0;s--)(l=e[s])&&(o=(n<3?l(o):n>3?l(t,i,o):l(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o};let C=class extends o.w3{};C=F([(0,o.Ei)({props:{}})],C);var T=C,z=i(89);const B=(0,z.Z)(T,[["render",O],["__scopeId","data-v-b48ac4ba"]]);var S=B;const R={class:"file-name-info"},A={class:"file-modify-info"};function U(e,t,i,a,n,o){const r=(0,l.up)("el-image");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l._)("div",{style:{"padding-top":"100%",position:"relative"},onDblclick:t[0]||(t[0]=(...t)=>e.handleDBLClick&&e.handleDBLClick(...t))},[(0,l.Wm)(r,{class:"image-1-1",size:"small",src:e.getimage(e.file.filetype),fit:"contain",lazy:!0},null,8,["src"])],32),(0,l._)("div",null,[(0,l._)("div",R,(0,s.zw)(e.file.filename),1),(0,l._)("div",A,(0,s.zw)(e.convertDate(e.file.modify_time)),1)])])}var V;(function(e){e["File"]="file",e["Folder"]="folder",e["Image"]="image",e["Text"]="text",e["Video"]="video",e["Audio"]="audio"})(V||(V={}));const Z=()=>window.location.origin;var I=function(e,t,i,a){var l,n=arguments.length,o=n<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,a);else for(var s=e.length-1;s>=0;s--)(l=e[s])&&(o=(n<3?l(o):n>3?l(t,i,o):l(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o};let q,E=class extends o.w3{constructor(...e){super(...e),(0,j.Z)(this,"file",q)}convertDate(e){return e.toLocaleDateString()+" "+e.toLocaleTimeString()}handleDBLClick(){this.$emit("fileDBClick",this.file)}getimage(e){let t=`static/filepic_${e}.png`;return e==V.Image&&(t=Z()+this.file.fullpath),t}};E=I([(0,o.Ei)({props:{file:{required:!0}}})],E);var M=E;const H=(0,z.Z)(M,[["render",U],["__scopeId","data-v-e4680a74"]]);var L=H;function $(e,t,i,a,n,o){return(0,l.wg)(),(0,l.iD)("div",null,"upload box")}var K=function(e,t,i,a){var l,n=arguments.length,o=n<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,a);else for(var s=e.length-1;s>=0;s--)(l=e[s])&&(o=(n<3?l(o):n>3?l(t,i,o):l(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o};let N=class extends o.w3{};N=K([(0,o.Ei)({props:{}})],N);var J=N;const Y=(0,z.Z)(J,[["render",$],["__scopeId","data-v-989163d4"]]);var G=Y,X=i(7178),Q=i(6666),ee=i(4161),te=function(e,t,i,a){var l,n=arguments.length,o=n<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,a);else for(var s=e.length-1;s>=0;s--)(l=e[s])&&(o=(n<3?l(o):n>3?l(t,i,o):l(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o};let ie=class extends o.w3{constructor(...e){super(...e),(0,j.Z)(this,"auth",{show:!1,basic:{username:"",password:""},token:"",selected:"basic",useAuthType:"annymous"}),(0,j.Z)(this,"upload",{show:!1}),(0,j.Z)(this,"ischange",!1),(0,j.Z)(this,"userAvatar","/_dash/static/user.png"),(0,j.Z)(this,"currentPaths",["/"]),(0,j.Z)(this,"files",[{filename:"test",filetype:V.Folder,modify_time:new Date,size:"4K"},{filename:"test_file.txt",filetype:V.File,modify_time:new Date,size:"10K"},{filename:"test.jpg",filetype:V.Image,modify_time:new Date,size:"1MB"}])}clearFiles(){const e=this.$refs.uploadref;e.clearFiles()}handleClose(){setTimeout(this.clearFiles,1e3),this.ischange&&this.getPathFiles(this.currentDir).finally((()=>{this.ischange=!1}))}handledblClick(e){e.filetype===V.Folder?(this.currentPaths.push(e.filename),this.getPathFiles(this.currentDir)):window.open(Z()+this.cleanPaths("/"+e.fullpath))}confirmAuth(){if("basic"==this.auth.selected){if(""==this.auth.basic.username||""==this.auth.basic.password)return void(0,X.z8)({message:"用户名或密码不能为空",type:"error"})}else if("token"==this.auth.selected){if(""==this.auth.token)return void(0,X.z8)({message:"token 不能为空",type:"error"})}else this.auth.selected;this.auth.show=!1,this.auth.useAuthType=this.auth.selected,localStorage.setItem("auth",JSON.stringify(this.auth)),this.getPathFiles(this.currentDir)}goBack(){this.currentPaths.pop(),this.getPathFiles(this.currentDir)}handleSuccess(e,t,i){(0,Q.bM)({duration:3e3,message:(0,l.h)("i",{style:"color: teal"},`文件 ${t.name} 上传成功`)})}goToPathByIndex(e){this.currentPaths=this.currentPaths.slice(0,e+1),this.getPathFiles(this.currentDir)}cleanPaths(e){return e.replace(/\/+/g,"/")}get currentDir(){let e=this.currentPaths.join("/");return e.replace(/\/+/g,"/")}created(){let e=localStorage.getItem("auth");e?(this.auth=JSON.parse(e),this.getPathFiles(this.currentDir)):this.auth.show=!0}convertBytes(e){return e<1024?e+"B":e<1048576?(e/1024).toFixed(2)+"KB":e<1073741824?(e/1024/1024).toFixed(2)+"MB":(e/1024/1024/1024).toFixed(2)+"GB"}getPathFiles(e){let t="/_apilist",i=[t,e].join("/").replace(/\/+/g,"/");if(i=Z()+i,"basic"==this.auth.useAuthType){let e=btoa(this.auth.basic.username+":"+this.auth.basic.password);ee.Z.defaults.headers.common.Authorization="Basic "+e}else"token"==this.auth.useAuthType?i+="?token="+this.auth.token:"annymous"==this.auth.useAuthType&&(ee.Z.defaults.headers.common.Authorization="");return ee.Z.get(i).then((e=>{let t=e.data.data,i=[];t.forEach((e=>{i.push({filename:e.name,filetype:e.file_type,modify_time:new Date(e.mod_time),size:this.convertBytes(e.size),fullpath:this.currentDir+"/"+e.name})})),this.files=i})).catch((e=>{(0,X.z8)({showClose:!0,message:"get files list error: "+e,type:"error"})}))}changePath(e){this.currentPaths.push(e)}uploadFile(e){return this.ischange=!0,new Promise(((t,i)=>{let a=e.file;const l=new XMLHttpRequest;let n=Z()+this.currentDir+"/"+a.name;if("basic"==this.auth.useAuthType){let e=btoa(this.auth.basic.username+":"+this.auth.basic.password);l.open("POST",n,!0),l.setRequestHeader("Authorization","Basic "+e)}else"token"==this.auth.useAuthType?(n=n+"?token="+this.auth.token,l.open("POST",n,!0)):l.open("POST",n,!0);const o=new FormData;o.append("file",a),l.send(o),l.onreadystatechange=()=>{4===l.readyState&&(200===l.status?t(l):((0,X.z8)({showClose:!0,dangerouslyUseHTMLString:!0,message:`<p>upload file error:</p><br/>filename: ${a.name}<p>status: ${l.status}</p><p>statusText: ${l.statusText}</p>`,type:"error"}),i(l)))}}))}};ie=te([(0,o.Ei)({props:{},components:{AuthBox:S,FileItem:L,UploadBox:G}})],ie);var ae=ie;const le=(0,z.Z)(ae,[["render",W],["__scopeId","data-v-5dbf3396"]]);var ne=le,oe=function(e,t,i,a){var l,n=arguments.length,o=n<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,a);else for(var s=e.length-1;s>=0;s--)(l=e[s])&&(o=(n<3?l(o):n>3?l(t,i,o):l(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o};let se=class extends o.w3{};se=oe([(0,o.Ei)({components:{HomePage:ne}})],se);var re=se;const ue=(0,z.Z)(re,[["render",n]]);var ce=ue,de=i(8919),fe=(i(4415),i(2748));const he=(0,a.ri)(ce);for(const[pe,me]of Object.entries(fe))he.component(pe,me);he.use(de.Z).mount("#app")}},t={};function i(a){var l=t[a];if(void 0!==l)return l.exports;var n=t[a]={exports:{}};return e[a].call(n.exports,n,n.exports,i),n.exports}i.m=e,function(){var e=[];i.O=function(t,a,l,n){if(!a){var o=1/0;for(c=0;c<e.length;c++){a=e[c][0],l=e[c][1],n=e[c][2];for(var s=!0,r=0;r<a.length;r++)(!1&n||o>=n)&&Object.keys(i.O).every((function(e){return i.O[e](a[r])}))?a.splice(r--,1):(s=!1,n<o&&(o=n));if(s){e.splice(c--,1);var u=l();void 0!==u&&(t=u)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[a,l,n]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var a in t)i.o(t,a)&&!i.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};i.O.j=function(t){return 0===e[t]};var t=function(t,a){var l,n,o=a[0],s=a[1],r=a[2],u=0;if(o.some((function(t){return 0!==e[t]}))){for(l in s)i.o(s,l)&&(i.m[l]=s[l]);if(r)var c=r(i)}for(t&&t(a);u<o.length;u++)n=o[u],i.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return i.O(c)},a=self["webpackChunkdashboard"]=self["webpackChunkdashboard"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=i.O(void 0,[998],(function(){return i(9832)}));a=i.O(a)})();
//# sourceMappingURL=app.c262dd22.js.map